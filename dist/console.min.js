(()=>{var t,e={6818:t=>{t.exports={mounted:function(){this.$parent.setTitle("Page does not exist...")}}},68322:(t,e,n)=>{"use strict";var o=function(t,e){for(var n in e)this[n]=e[n];this.available=function(e){var n=this.atLeast;return n===Object(n)&&(n=t.permissions.atLeast(n.tag,n.default)),void 0===n||e.atLeast(n)}},r=function(t,e){this.title=e.title,this.order=e.order,this.options=[],this.add=function(e){this.options.push(new o(t,e))},this.sort=function(){this.options.sort((function(t,e){return t.order-e.order}))},this.available=function(t){return t.atLeast(this.minimumRole(t))},this.minimumRole=function(e){if(0===this.options.length)return"A";var n=null,o=1e6;return this.options.forEach((function(r){var i=r.atLeast;i===Object(i)&&(i=t.permissions.atLeast(i.tag,i.default));var s=e.getRolePriority(i);0!==s&&s<o&&(n=i,o=s)})),null===n?"A":n}},i=function(t,e){var n=this;this.title=e.title,this.route=e.route,this.order=e.order,this.component=e.component,this.atLeast=void 0!==e.atLeast?e.atLeast:null,this.sections=[],this.add=function(e){if(void 0!==e.section){var n=o(e.section.title);if(null!==n)n.add(e);else{var i=new r(t,e.section);this.sections.push(i),i.add(e)}}},this.sort=function(){this.sections.sort((function(t,e){return t.order-e.order})),this.sections.forEach((function(t){t.sort()}))};var o=function(t){for(var e in n.sections)if(n.sections[e].title===t)return n.sections[e];return null};this.available=function(t){return t.atLeast(this.minimumRole(t))},this.minimumRole=function(e){var n=this.atLeast;n===Object(n)&&(n=t.permissions.atLeast(n.tag,n.default));var o=null!==this.atLeast?e.getRolePriority(n):1e5;return this.sections.forEach((function(t){var r=t.minimumRole(e),i=e.getRolePriority(r);0!==i&&i<o&&(n=r,o=i)})),null===n?"A":n}};function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var c=function(t){var e=this,n=[];this.addStart=function(t){n.push(t)},this.start=function(t){n.forEach((function(e){e(t)}))},this.main=[],this.addMainComponent=function(t,e,n){},this.nav2=[],this.addNav2=function(t,e){return this.nav2.push({component:t,order:e}),this.nav2.sort((function(t,e){return t.order-e.order})),t},this.removeNav2=function(t,e){if(Array.isArray(e)){var n,o=s(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;this.removeNav2(t,r)}}catch(t){o.e(t)}finally{o.f()}}else for(var i=0;i<this.nav2.length;i++)if(this.nav2[i].component===e)return this.nav2.splice(i,1),void t.$set(this,"nav2",this.nav2)},this.addNav2Link=function(t,e,n,o){var r={template:'<a @click.prevent="click">'.concat(e,"</a>"),methods:{click:function(){o()}}};return this.addNav2(r,n),this.nav2.sort((function(t,e){return t.order-e.order})),t.$set(this,"nav2",this.nav2),r},this.nav2right=null,this.nav2left=null;var o=[];this.addOption=function(t){o.push(t)},this.pages=[],this.sort=function(){var e=this;o.forEach((function(n){var o=a(n.page.title);if(null!==o)o.add(n);else{var r=new i(t,n.page);e.pages.push(r),r.add(n)}})),this.pages.sort((function(t,e){return t.order-e.order})),this.pages.forEach((function(t){t.sort()})),this.main.sort((function(t,e){return t.order-e.order}))},this.getPages=function(){return this.pages};var r=[];this.addRoute=function(t){r.push(t)},this.addRoutes=function(t){var e,n=s(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;r.push(o)}}catch(t){n.e(t)}finally{n.f()}},this.getRoutes=function(){return r};var a=function(t){for(var n in e.pages)if(e.pages[n].title===t)return e.pages[n];return null}},l=function(){this.tables=[{title:"Site",order:0,api:"/api/site/tables"}],this.add=function(t){this.tables.push(t)}},u=function(t,e,n,o){var r=this;this.template='<div id="cl-console-main"><div class="content">';var i={},s=1;o.sections.forEach((function(t){if(t.available(n)){r.template+="<h2>".concat(t.title,"</h2>");var o="";t.options.forEach((function(t){if(void 0!==t.title){var r=t.atLeast;r===Object(r)&&(r=e.permissions.atLeast(r.tag,r.default)),(void 0===r||n.atLeast(r))&&(o+='<li><router-link to="'.concat(e.root,"/cl/console").concat(t.route,'">').concat(t.title,"</router-link></li>"))}})),o.length>0&&(r.template+="<ul>"+o+"</ul>"),t.options.forEach((function(t){void 0!==t.component&&(r.template+="<console-component-".concat(s,"></console-component-").concat(s,">"),i["console-component-"+s]=t.component,s++)}))}})),this.template+="</div></div>",this.components=i,this.mounted=function(){"Main"===o.title?this.$parent.setTitle(""):this.$parent.setTitle(": "+o.title)}},f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"cl-nav"},[n("div",[n("ul",{staticClass:"dividers"},[n("li",[n("a",{attrs:{href:t.homeLink}},[n("span",{staticClass:"home"},[t._v("Home")])])]),t._v(" "),t._l(t.console.components.pages,(function(e){return e.available(t.user)?n("li",[n("router-link",{attrs:{to:t.pageLink(e)}},[t._v(t._s(e.title))])],1):t._e()}))],2)]),t._v(" "),t.console.components.nav2.length>0?n("div",[n("div",{staticClass:"nav2"},[n("div",{staticClass:"left"},[t.console.components.nav2left?n(t.console.components.nav2left,{tag:"component"}):t._e()],1),t._v(" "),n("div",{staticClass:"center"},t._l(t.console.components.nav2,(function(e){return n("div",[n(e.component,{tag:"component",attrs:{short:t.console.components.nav2.length>2}})],1)})),0),t._v(" "),n("div",{staticClass:"right"},[t.console.components.nav2right?n(t.console.components.nav2right,{tag:"component"}):t._e()],1)])]):t._e()])};f._withStripped=!0;const h={props:["console","user"],data:function(){return{homeLink:""}},mounted:function(){this.homeLink=this.$site.root+"/"},methods:{pageLink:function(t){return"".concat(this.$site.root,"/cl/console").concat(t.route)}}};var d=n(36337),v=(0,d.Z)(h,f,[],!1,null,null,null);v.options.__file="vendor/cl/console/js/NavComponent.vue";const p=v.exports;var m=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)};m._withStripped=!0;var b=n(6818);const g=n.n(b)();var y=(0,d.Z)(g,m,[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("p",[t._v("Page does not exist...")])])}],!1,null,null,null);y.options.__file="vendor/cl/console/js/NotFoundComponent.vue";const _=y.exports;function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw i}}}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var $=function(t){this.title="Site Console",this.components=new c(t),this.tables=new l,this.start=function(e){var n=this;this.components.sort(),this.components.start(this);var o=t.store.state.user.user,r='<div class="cl-console"><site-header :title="title">\n<console-nav :console="console" :user="user"></console-nav>\n</site-header>';this.components.main.forEach((function(t){r+="<".concat(t.tag," />")})),r+="\n<router-view></router-view>\n<site-footer></site-footer></div>";var i,s=[],a=w(this.components.getRoutes());try{for(a.s();!(i=a.n()).done;){var c=i.value,l={path:t.root+"/cl/console"+c.route,component:c.component};void 0!==c.props&&(l.props=c.props),void 0!==c.name&&(l.name=c.name),s.push(l)}}catch(t){a.e(t)}finally{a.f()}this.components.pages.forEach((function(e){if(o.atLeast(e.minimumRole(o))){var r=void 0!==e.component?e.component:new u(n,t,o,e);s.push({path:t.root+"/cl/console"+e.route,component:r}),e.sections.forEach((function(e){e.options.forEach((function(e){e.available(o)&&void 0!==e.routes&&e.routes.forEach((function(e){var n={path:t.root+"/cl/console"+e.route,component:e.component};void 0!==e.props&&(n.props=e.props),void 0!==e.name&&(n.name=e.name),s.push(n)}))}))}))}})),s.push({path:"*",component:_});var f=t.info.header.component(),h=t.info.footer.component(),d=new t.VueRouter({routes:s,mode:"history"}),v={"site-header":f,"site-footer":h,"console-nav":p},m=t.store,b=this.title,g=this;this.masterVue=new t.Vue({el:e,store:m,site:t,template:r,router:d,data:function(){return{title:b,console:g,user:o}},props:{},components:v,methods:{isAdmin:function(){return admin},setTitle:function(t){this.title=b+t,document.title=Site.info.siteName+" "+b+t}},created:function(){this.setTitle("")},mounted:function(){new t.StickyNav("div.cl-console nav")}})}},C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("h2",[t._v("Database Tables Management")]),t._v(" "),t._m(0),t._v(" "),n("p",[t._v("The page provides an Administrator the ability to create and destroy database tables.\n  Only use during course startup! The create option will not drop an existing table\n  unless the drop and create option is selected. The clean option allows for cleaning\n  of orphaned records from tables.")]),t._v(" "),n("div",[n("table",[t._m(1),t._v(" "),t._l(t.tables,(function(e){return n("tr",[n("td",[t._v(t._s(e.title))]),t._v(" "),n("td",[n("button",{on:{click:function(n){return n.preventDefault(),t.create(e,!1)}}},[t._v("create")])]),t._v(" "),n("td",[n("button",{on:{click:function(n){return n.preventDefault(),t.dropCreate(e)}}},[t._v("drop-and-create")])]),t._v(" "),n("td",[n("button",{on:{click:function(n){return n.preventDefault(),t.clean(e)}}},[t._v("clean")])])])}))],2)]),t._v(" "),t.results.length>0?n("pre",{staticClass:"code"},[t._v(t._s(t.results))]):t._e()])};C._withStripped=!0;var L=n(89936);const O={data:function(){return{tables:this.$site.console.tables.tables,results:""}},mounted:function(){this.$parent.setTitle(": Database Tables"),this.$site.console.tables.tables.sort((function(t,e){return t.order-e.order}))},methods:{create:function(t,e){var n=this;this.$site.api.post(t.api,{drop:e?"yes":"no"}).then((function(o){o.hasError()?n.$site.toast(n,o):e?n.$site.toast(n,t.title+" tables dropped and recreated"):n.$site.toast(n,t.title+" tables created")})).catch((function(t){n.$site.toast(n,t)}))},dropCreate:function(t){var e=this;new L.Z.MessageBox("Are you sure?","Are you sure you want to drop and recreate the "+t.title+" tables?",L.Z.MessageBox.OKCANCEL,(function(){e.create(t,!0)}))},clean:function(t){var e=this;this.$site.api.post(t.api,{clean:"yes"}).then((function(n){if(n.hasError())e.$site.toast(e,n);else{var o=n.getData("table-clean").attributes;e.results+=t.title+" Tables\n\n"+o+"\n",console.log(o)}})).catch((function(t){e.$site.toast(e,t)}))}}};var E=n(81525),k=n.n(E),A=n(40783),j={insert:"head",singleton:!1};k()(A.Z,j);A.Z.locals;var T=(0,d.Z)(O,C,[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"center red"},[n("em",[t._v("Use with caution!")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("Tables")]),t._v(" "),n("th",{attrs:{colspan:"3"}},[t._v("Operations")])])}],!1,null,"746ac1d7",null);T.options.__file="vendor/cl/console/js/TablesComponent.vue";const N=T.exports;const x={extends:Site.UserVueBase,methods:{addNav2:function(t,e,n){var o=this.$site.console.components.addNav2Link(this,t,e,n);return this.components1.push(o),o},addNav2Link:function(t,e,n){var o=this;this.addNav2(t,e,(function(){o.$router.push(Site.root+n)}))},removeNav2:function(t){var e=this.components1.indexOf(t);e>=0&&this.components1.splice(e,1),this.$site.console.components.removeNav2(this,t)},timeRelativeUNIX:function(t,e,n){return this.$site.TimeFormatter.relativeUNIX(t,e,n)}},created:function(){this.components1=[]},beforeDestroy:function(){this.$site.console.components.removeNav2(this,this.components1)}};var R=(0,d.Z)(x,undefined,undefined,!1,null,null,null);R.options.__file="vendor/cl/console/js/ConsoleComponentBase.vue";const M=R.exports;var P=function(){};P.create=function(t){var e=new $(t);return t.console=e,e.components.addOption({atLeast:Site.User.STAFF,page:{title:"Main",route:"",order:1}}),e.components.addOption({atLeast:Site.User.ADMIN,page:{title:"Management",route:"/management",order:10},section:{title:"Site Management",order:1},title:"Tables",order:10,route:"/management/tables",routes:[{route:"/management/tables",name:"tables",component:N}]}),t.start((function(){var t=document.querySelector("div.cl-console");null!==t&&e.start(t)})),t.ConsoleComponentBase=M,e},Site.ConsoleComponentBase=M;P.create(Site)},40783:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var o=n(76433),r=n.n(o)()((function(t){return t[1]}));r.push([t.id,"table td[data-v-746ac1d7]{padding:.25em}table button[data-v-746ac1d7]{display:inline-block;font-size:.85em;font-style:italic}li span[data-v-746ac1d7]{display:inline-block;width:6em;font-size:inherit;font-style:normal}",""]);const i=r}},n={};function o(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,t=[],o.O=(e,n,r,i)=>{if(!n){var s=1/0;for(l=0;l<t.length;l++){for(var[n,r,i]=t[l],a=!0,c=0;c<n.length;c++)(!1&i||s>=i)&&Object.keys(o.O).every((t=>o.O[t](n[c])))?n.splice(c--,1):(a=!1,i<s&&(s=i));a&&(t.splice(l--,1),e=r())}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[n,r,i]},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),o.j=828,(()=>{var t={828:0};o.O.j=e=>0===t[e];var e=(e,n)=>{var r,i,[s,a,c]=n,l=0;for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(c)var u=c(o);for(e&&e(n);l<s.length;l++)i=s[l],o.o(t,i)&&t[i]&&t[i][0](),t[s[l]]=0;return o.O(u)},n=self.webpackChunkcourselib=self.webpackChunkcourselib||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var r=o.O(void 0,[592,736],(()=>o(68322)));r=o.O(r)})();